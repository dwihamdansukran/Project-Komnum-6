import numpy as np
import pandas as pd
from tabulate import tabulate  # Memerlukan library tabulate
import tkinter as tk
from tkinter import messagebox
import matplotlib.pyplot as plt  # Memerlukan library matplotlib

# Fungsi untuk menjalankan evaluasi fungsi yang dimasukkan pengguna
def f(x):
    try:
        return eval(func_input.get())
    except Exception as e:
        messagebox.showerror("Error", f"Error in function evaluation: {e}")
        return None

# Fungsi utama untuk melakukan perhitungan dan menampilkan hasil
def calculate():
    global data  # Menyimpan data ke variabel global untuk digunakan di plot
    try:
        N = int(entry_N.get())  # Mengambil jumlah langkah N dari input
        batas_bawah = float(entry_bawah.get())  # Mengambil batas bawah dari input
        batas_atas = float(entry_atas.get())  # Mengambil batas atas dari input

 # xera Menyiapkan list untuk menyimpan data tabel

# Melakukan iterasi untuk menghitung xi, f(xi), dan f(xi+1)
        for i in range(1, N + 2):
            xi = batas_bawah + (i - 1) * H
            fi = f(xi)

            if i < N + 1:
                fi_next = f(batas_bawah + i * H)
            else:
                fi_next = None

            product = fi * fi_next if fi_next is not None else None
            data.append([xi, fi, fi_next, product])

            # Mengecek kondisi |f(xk)| < |f(xk+1)| dan menyimpan iterasi pertama yang memenuhi syarat
            if chosen_iteration is None and i < N + 1 and abs(fi) < abs(fi_next):
                chosen_iteration = i
                chosen_x = xi
